apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: arc-runner-terraform-helm-argocd
  namespace: arc-runner
spec:
  replicas: 2
  template:
    spec:
      repository: AbeYuki/terraform-helm-argocd
      containerMode: kubernetes
      serviceAccountName: runner-sa
      workVolumeClaimTemplate:
        storageClassName: "longhorn"
        accessModes:
          - ReadWriteOnce
        resources:
          requests:
            storage: 1Gi
      env:
        - name: ACTIONS_RUNNER_POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: ACTIONS_RUNNER_REQUIRE_JOB_CONTAINER
          value: "true"
